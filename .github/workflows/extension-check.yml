name: Extension and Naming Policy Check

on:
  pull_request:
  push:
    branches: [ main, develop ]

jobs:
  check-naming:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Check file extensions
        run: |
          errors=0

          echo "ğŸ” Checking for uppercase extensions..."
          if git ls-files | grep -E '\.[^./]*[A-Z][^/]*$'; then
            echo "âŒ Uppercase extensions found. Please rename to lowercase."
            echo "âŒ å¤§æ–‡å­—ã®æ‹¡å¼µå­ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚ã™ã¹ã¦å°æ–‡å­—ã«ãƒªãƒãƒ¼ãƒ ã—ã¦ãã ã•ã„ã€‚"
            errors=1
          fi

          echo "ğŸ” Checking for .jpeg files..."
          if git ls-files | grep -E '\.jpeg$'; then
            echo "âŒ .jpeg found. Please use .jpg."
            echo "âŒ .jpeg ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚.jpg ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚"
            errors=1
          fi

          echo "ğŸ” Checking for .yaml files..."
          if git ls-files | grep -E '\.yaml$'; then
            echo "âŒ .yaml found. Please use .yml."
            echo "âŒ .yaml ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚.yml ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚"
            errors=1
          fi

          if [ $errors -ne 0 ]; then
            echo "ğŸš« Policy violations detected. Please fix before merging."
            echo "ğŸš« ãƒãƒªã‚·ãƒ¼é•åãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚ä¿®æ­£ã—ã¦ã‹ã‚‰ãƒãƒ¼ã‚¸ã—ã¦ãã ã•ã„ã€‚"
            exit 1
          fi

          echo "âœ… All checks passed!"
          echo "âœ… ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯ã‚’é€šéã—ã¾ã—ãŸï¼"
